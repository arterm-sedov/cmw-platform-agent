[tool.ruff]
# Ruff configuration for cmw-platform-agent
# Based on LangChain and Gradio best practices

# Target Python version
target-version = "py311"

# Line length (PEP 8 standard)
line-length = 88

# Exclude directories
exclude = [
    "__pycache__",
    ".git",
    ".venv",
    "venv",
    ".pytest_cache",
    "build",
    "dist",
    "*.egg-info",
]

# Include patterns
include = ["*.py"]

# Rule configuration
[tool.ruff.lint]
# Enable all rules
select = ["E", "W", "F", "I", "N", "UP", "YTT", "ANN", "S", "BLE", "FBT", "B", "A", "COM", "C4", "DTZ", "T10", "EM", "EXE", "FA", "ISC", "ICN", "G", "INP", "PIE", "T20", "PYI", "PT", "Q", "RSE", "RET", "SLF", "SIM", "TID", "TCH", "ARG", "PTH", "ERA", "PD", "PGH", "PL", "TRY", "FLY", "NPY", "AIR", "PERF", "FURB", "LOG", "RUF"]

# Ignore specific rules that conflict with LangChain patterns
ignore = [
    "S101",    # Use of assert (common in LangChain tests)
    "PLR0913", # Too many arguments (LangChain tools often have many params)
    "PLR0912", # Too many branches (complex LangChain logic)
    "PLR0915", # Too many statements (LangChain chains can be long)
    "COM812",  # Missing trailing comma (conflicts with Black)
    "ISC001",  # Implicitly concatenated string literals (common in prompts)
]

# Allow specific patterns
[tool.ruff.lint.per-file-ignores]
"**/tests/**/*.py" = ["S101", "PLR2004", "ANN001"]
"**/misc_files/**/*.py" = ["S101", "PLR2004", "ANN001"]

# Import sorting
[tool.ruff.lint.isort]
known-first-party = ["agent_ng", "tools"]
force-sort-within-sections = true

# String formatting
[tool.ruff.lint.flake8-quotes]
docstring-quotes = "double"
inline-quotes = "double"

# Type checking
[tool.ruff.lint.flake8-annotations]
allow-star-arg-any = true
ignore-fully-untyped = true

# LangChain specific configurations
[tool.ruff.lint.pylint]
max-args = 10
max-locals = 20
max-branches = 15
max-statements = 60
